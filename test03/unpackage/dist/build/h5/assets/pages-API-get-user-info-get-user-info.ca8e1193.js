var e=Object.defineProperty,n=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(n,s,t)=>s in n?e(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t,i=(e,n)=>{for(var s in n||(n={}))r.call(n,s)&&o(e,s,n[s]);if(t)for(var s of t(n))a.call(n,s)&&o(e,s,n[s]);return e};import{_ as l,X as f,ao as u,ai as c,$ as d,o as h,c as g,w as I,a as p,b,m,B as v,t as U,F as y,r as _,d as k,e as O,f as P,i as w,g as j,v as x}from"./index.fb84ef13.js";var L,N;var C=l({data:()=>({title:"getUserInfo",hasUserInfo:!1,userInfo:{},btnLoading:!1}),computed:i({},f(["loginProvider","isUniverifyLogin"])),methods:(L=i({},u(["getPhoneNumber"])),N={getUserInfo(){if(this.btnLoading=!0,this.isUniverifyLogin)this.getPhoneNumber(c("univerifyInfo")).then((e=>{this.hasUserInfo=!0,this.userInfo={phoneNumber:e}})).catch((e=>{console.error("getUserInfo fail:",e),this.hasUserInfo=!1})).finally((()=>{this.btnLoading=!1}));else{if("apple"===this.loginProvider){const e=c("apple_nickname");if(e)return this.hasUserInfo=!0,this.userInfo={nickName:e},void(this.btnLoading=!1)}uni.getUserInfo({provider:this.loginProvider,success:e=>{this.hasUserInfo=!0,this.userInfo=e.userInfo},fail:e=>{console.log("getUserInfo fail",e);let n=e.errMsg;~n.indexOf("uni.login")&&(n="请在登录页面完成登录操作"),uni.getSetting({success:e=>{let s=e.authSetting["scope.userInfo"];d(s?{title:"获取用户信息失败",content:"错误原因"+n,showCancel:!1}:{title:"授权失败",content:"Hello uni-app需要获取您的用户信息，请在设置界面打开相关权限",success:e=>{e.confirm&&uni.openSetting()}})}})},complete:()=>{this.btnLoading=!1}})}},mpGetUserInfo(e){console.log("mpGetUserInfo",e),"getUserInfo:ok"===e.detail.errMsg?(this.hasUserInfo=!0,e.detail&&e.detail.userInfo&&(this.userInfo=e.detail.userInfo)):d({title:"获取用户信息失败",content:"错误原因"+e.detail.errMsg,showCancel:!1})},clear(){this.hasUserInfo=!1,this.userInfo={}}},n(L,s(N)))},[["render",function(e,n,s,t,r,a){const o=_(O("page-head"),k),i=P,l=w,f=j,u=x;return h(),g(l,null,{default:I((()=>[p(o,{title:r.title},null,8,["title"]),p(l,{class:"uni-padding-wrap"},{default:I((()=>[p(l,{style:{background:"#FFF",padding:"40rpx"}},{default:I((()=>[!1===r.hasUserInfo?(h(),g(l,{key:0,class:"uni-hello-text uni-center"},{default:I((()=>[p(i,null,{default:I((()=>[b("请点击下方按钮获取用户头像及昵称或手机号")])),_:1})])),_:1})):m("",!0),!0===r.hasUserInfo?(h(),v(y,{key:1},[p(l,{class:"uni-h4 uni-center uni-common-mt"},{default:I((()=>[b(U(r.userInfo.nickName||r.userInfo.nickname||r.userInfo.gender||r.userInfo.email||r.userInfo.phoneNumber),1)])),_:1}),r.userInfo.avatarUrl||r.userInfo.avatar_url?(h(),g(l,{key:0,style:{padding:"30rpx 0","text-align":"center"}},{default:I((()=>[p(f,{class:"userinfo-avatar",src:r.userInfo.avatarUrl||r.userInfo.avatar_url},null,8,["src"])])),_:1})):m("",!0)],64)):m("",!0)])),_:1}),p(l,{class:"uni-btn-v"},{default:I((()=>[p(u,{onClick:a.clear},{default:I((()=>[b("清空")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-c1c30520"]]);export{C as default};
