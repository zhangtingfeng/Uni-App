import{_ as e,a3 as n,s as t,o as s,c as o,w as a,a as i,b as l,m as u,r,d as p,e as d,v as c,i as m,R as f}from"./index.fb84ef13.js";var g=e({data:()=>({title:"push",provider:[],pushServer:"http://demo.dcloud.net.cn/push/?",tranMsg:""}),onLoad:function(){n({service:"push",success:e=>{console.log("success",e),this.provider=e.provider},fail:e=>{console.log("获取推送通道失败",e)}})},onUnload:function(){this.tranMsg=""},methods:{listenTranMsg(){plus.push.addEventListener("click",(e=>{this.tranMsg=JSON.stringify(e)})),plus.push.addEventListener("receive",(e=>{this.tranMsg=JSON.stringify(e)})),t({title:"开始监听透传数据",icon:"success"})},requireTranMsg(){var e=plus.push.getClientInfo(),n=this.pushServer+"type=tran&appid="+encodeURIComponent(plus.runtime.appid);e.id&&(n+="&id="+e.id),n+="&cid="+encodeURIComponent(e.clientid),"iOS"==plus.os.name&&(n+="&token="+encodeURIComponent(e.token)),n+="&title="+encodeURIComponent("Hello uniapp"),n+="&content="+encodeURIComponent("带透传数据推送通知！"),"iOS"===plus.os.name?n+="&payload="+encodeURIComponent('{"title":"Hello uniapp Test","content":"test content"}'):n+="&payload="+encodeURIComponent('\'{"title":"Hello uniapp Test","content":"test content"}\''),n+="&version="+encodeURIComponent(plus.runtime.version),plus.runtime.openURL(n)}}},[["render",function(e,n,t,g,v,h){const C=r(d("page-head"),p),U=c,y=m,M=f;return s(),o(y,null,{default:a((()=>[i(C,{title:v.title},null,8,["title"]),v.provider[0]?(s(),o(y,{key:0,class:"uni-padding-wrap"},{default:a((()=>[i(y,{class:"uni-btn-v uni-common-mt"},{default:a((()=>[i(U,{type:"primary",onClick:h.listenTranMsg},{default:a((()=>[l("监听透传数据")])),_:1},8,["onClick"])])),_:1}),i(y,{class:"uni-btn-v uni-common-mt"},{default:a((()=>[i(U,{type:"primary",onClick:h.requireTranMsg},{default:a((()=>[l('发送"透传数据"消息')])),_:1},8,["onClick"])])),_:1}),i(y,{class:"uni-title uni-common-mt"},{default:a((()=>[l("透传内容：")])),_:1}),i(y,{class:"uni-textarea"},{default:a((()=>[i(M,{modelValue:v.tranMsg,"onUpdate:modelValue":n[0]||(n[0]=e=>v.tranMsg=e)},null,8,["modelValue"])])),_:1})])),_:1})):u("",!0)])),_:1})}]]);export{g as default};
