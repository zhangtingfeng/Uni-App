import{_ as e,o as l,c as t,w as u,a,A as i,z as n,b as s,f as o,i as d,I as c,r,e as m}from"./index.fb84ef13.js";import{_ as p}from"./uni-card.d5287825.js";import{_ as h}from"./uni-section.fac8d8c9.js";var b=e({name:"UniNumberBox",emits:["change","input","update:modelValue","blur","focus"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},background:{type:String,default:"#f5f5f5"},color:{type:String,default:"#333"},disabled:{type:Boolean,default:!1}},data:()=>({inputValue:0}),watch:{value(e){this.inputValue=+e},modelValue(e){this.inputValue=+e}},created(){1===this.value&&(this.inputValue=+this.modelValue),1===this.modelValue&&(this.inputValue=+this.value)},methods:{_calcValue(e){if(this.disabled)return;const l=this._getDecimalScale();let t=this.inputValue*l,u=this.step*l;if("minus"===e){if(t-=u,t<this.min*l)return;t>this.max*l&&(t=this.max*l)}if("plus"===e){if(t+=u,t>this.max*l)return;t<this.min*l&&(t=this.min*l)}this.inputValue=(t/l).toFixed(String(l).length-1),this.$emit("change",+this.inputValue),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue)},_getDecimalScale(){let e=1;return~~this.step!==this.step&&(e=Math.pow(10,String(this.step).split(".")[1].length)),e},_onBlur(e){this.$emit("blur",e);let l=e.detail.value;if(!l)return;l=+l,l>this.max?l=this.max:l<this.min&&(l=this.min);const t=this._getDecimalScale();this.inputValue=l.toFixed(String(t).length-1),this.$emit("change",+this.inputValue),this.$emit("input",+this.inputValue)},_onFocus(e){this.$emit("focus",e)}}},[["render",function(e,r,m,p,h,b){const f=o,g=d,V=c;return l(),t(g,{class:"uni-numbox"},{default:u((()=>[a(g,{onClick:r[0]||(r[0]=e=>b._calcValue("minus")),class:"uni-numbox__minus uni-numbox-btns",style:n({background:m.background})},{default:u((()=>[a(f,{class:i(["uni-numbox--text",{"uni-numbox--disabled":h.inputValue<=m.min||m.disabled}]),style:n({color:m.color})},{default:u((()=>[s("-")])),_:1},8,["class","style"])])),_:1},8,["style"]),a(V,{disabled:m.disabled,onFocus:b._onFocus,onBlur:b._onBlur,class:"uni-numbox__value",type:"number",modelValue:h.inputValue,"onUpdate:modelValue":r[1]||(r[1]=e=>h.inputValue=e),style:n({background:m.background,color:m.color})},null,8,["disabled","onFocus","onBlur","modelValue","style"]),a(g,{onClick:r[2]||(r[2]=e=>b._calcValue("plus")),class:"uni-numbox__plus uni-numbox-btns",style:n({background:m.background})},{default:u((()=>[a(f,{class:i(["uni-numbox--text",{"uni-numbox--disabled":h.inputValue>=m.max||m.disabled}]),style:n({color:m.color})},{default:u((()=>[s("+")])),_:1},8,["class","style"])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-c8168ffa"]]);var f=e({components:{},data:()=>({numberValue:0,vModelValue:3}),methods:{change(e){this.numberValue=e},changeValue(e){console.log("返回数值：",e)},blur(e){console.log("-------blur:",e)},focus(e){console.log("-------focus:",e)}}},[["render",function(e,i,n,c,f,g){const V=o,_=r(m("uni-card"),p),x=r(m("uni-number-box"),b),y=r(m("uni-section"),h),v=d;return l(),t(v,{class:"page"},{default:u((()=>[a(_,{"is-shadow":!1,"is-full":""},{default:u((()=>[a(V,{class:"uni-h6"},{default:u((()=>[s("数字输入框组件多用于购物车加减商品等场景")])),_:1})])),_:1}),a(y,{title:"基本用法",type:"line",padding:""},{default:u((()=>[a(x,{onChange:g.changeValue},null,8,["onChange"])])),_:1}),a(y,{title:"使用v-model : "+f.vModelValue,subTitle:"使用 v-model 显示默认值",type:"line",padding:""},{default:u((()=>[a(x,{modelValue:f.vModelValue,"onUpdate:modelValue":i[0]||(i[0]=e=>f.vModelValue=e),onBlur:g.blur,onFocus:g.focus,onChange:g.changeValue},null,8,["modelValue","onBlur","onFocus","onChange"])])),_:1},8,["title"]),a(y,{title:"设置最小值和最大值",subTitle:"使用 min \\ max 属性设置最大最小值",type:"line",padding:""},{default:u((()=>[a(x,{min:2,max:9,value:555})])),_:1}),a(y,{title:"设置步长（步长0.1)",subTitle:"使用 step 属性设置步长",type:"line",padding:""},{default:u((()=>[a(x,{value:1.1,step:.1},null,8,["value","step"])])),_:1}),a(y,{title:"自定义背景",type:"line",subTitle:"使用 background 属性设置自定义背景色",padding:""},{default:u((()=>[a(x,{value:50,background:"#2979FF",color:"#fff"})])),_:1}),a(y,{title:"禁用状态",subTitle:"使用 disabled 属性设置组件禁用",type:"line",padding:""},{default:u((()=>[a(x,{disabled:!0})])),_:1}),a(y,{title:"获取输入的值 : "+f.numberValue,type:"line",padding:""},{default:u((()=>[a(x,{value:f.numberValue,onChange:g.change},null,8,["value","onChange"])])),_:1},8,["title"])])),_:1})}]]);export{f as default};
